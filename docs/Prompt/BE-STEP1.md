# Prompt BE-STEP1（新建干净项目 + Supabase Auth + 核心 Schema + 用户状态读取入口）

你是 Claude Code（后端/全栈偏后端）。请不要在当前目录直接改造旧项目。
重要前置指令：参考 ProfileLift 项目的“业务逻辑与行为”，但不要复制其旧的目录结构与冗余文件。ProfileLift 项目在此项目的同级目录下，目录名称为profilelift

## 目标（Step 1 只做到这里）
- 完成 Supabase Auth 的最小闭环：注册/登录/会话识别（供前端调用）
- 建立 Starter Template 的“通用 SaaS 底座”核心数据库 Schema（不包含任何业务域表：流程图/SOP/会议纪要等一律不要）
- 提供一个统一的“用户当前状态读取入口”，返回：
  - 当前用户基本信息（可包含扩展画像）
  - 当前方案/订阅状态（至少 Free/Pro）
  - 当前 Credits/额度（默认值即可）
  - 当前权益（Entitlements，哪怕先是最小结构）

## 必须落库的通用数据模型（语义必须一致）
1) 用户扩展画像（与 Auth 用户关联）
2) 订阅/方案状态（先支持 Free/Pro 的表达；支付联动留接口但本步不接入完整支付）
3) 权益映射（Entitlements）：方案如何映射到额度/能力（先最小结构）
4) Credits/额度：至少支持“当前余额/剩余额度”的存储
5) 用量账本（Ledger）：为后续扣点与追溯保留结构（本步可只建表与最小写入/读取接口）
6) Webhook 事件记录表：为后续支付回调追溯预留（本步只建表，不实现完整回调链路）

## 权限与安全（本步必须做到）
- 基础 RLS 生效：用户只能读取/写入自己的画像与额度/账本数据
- 默认成本护栏结构就位：为匿名与登录态预留限流/配额策略的配置入口（实现可以后续，但结构与开关要明确）

## 约束
- 不实现流程图/SOP 等任何业务功能
- 不实现完整支付流程（订阅状态可先用默认 Free，或通过可配置方式模拟 Pro 以便前端联调）
- 所有可变项集中在配置层：默认额度、方案名、权益参数、是否启用某些护栏

## 验收标准（你需要自检并确保成立）
- 新用户注册后：数据库中能自动创建对应的用户画像与默认 Credits 记录
- 登录态下：前端可以稳定读取到 user + plan + entitlements + credits
- 任意用户无法读取到其他用户的数据（RLS 验证通过）
- 输出一份“Schema 与字段语义说明”（纯文字）：每张表用途、关键字段含义、与 Auth 的关联关系
